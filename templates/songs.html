{% extends 'layout.html' %}


{% block body %}
  
  <div class="row">
    <div class="col-md-6">
      <h2>Song Selection</h2>

      <!-- Read input from search field -->
      {% from "_formhelpers.html" import render_field %}
      <form method=post>
        <dl> 
          {{ render_field(form.select) }}
          {{ render_field(form.search) }}
        </dl>
        <input type=submit value=Search>
      </form>
    </div>

    <div class="col-md-6">
      <h2>Recommendations</h2>
      <!-- Soundcloud widget -->
      <p>This is where the recommendations go.</p>

    </div>
  </div>


  <div class="footer">
    <iframe width="100%" height="125" scrolling="no" frameborder="no" src='https://w.soundcloud.com/player/?url=https%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F441797346&show_artwork=true&client_id=93e33e327fd8a9b77becd179652272e2'></iframe>
    <script src="https://w.soundcloud.com/player/api.js" type="text/javascript"></script>
    <script type="text/javascript">
      (function(){
        var widgetIframe = document.getElementById('sc-widget'),
            widget       = SC.Widget(widgetIframe),
            newSoundUrl = 'http://api.soundcloud.com/tracks/441456084';

        widget.bind(SC.Widget.Events.READY, function() {
          // load new widget
          widget.bind(SC.Widget.Events.FINISH, function() {
            widget.load(newSoundUrl, {
              show_artwork: false
            });
          });
        });
      }());
      </script>
  </div>


  <!-- Display results when searched -->
  {% with messages = get_flashed_messages() %}
    {% if messages %}
      <ul class=flashes>
      {% for message in messages %}
        {{ message }}
      {% endfor %}
      </ul>
    {% endif %}
  {% endwith %}

{% endblock %}
